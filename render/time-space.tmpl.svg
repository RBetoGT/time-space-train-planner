<?xml-stylesheet type="text/css" href="res/client.css" ?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
    viewBox="0 0 {{.SpaceAxisSize}} {{.TimeAxisSize}}">
    <defs>
        <marker id="dot-redundant-false" viewBox="0 0 10 10" refX="5" refY="5"
            markerWidth="4" markerHeight="4" filter="none">
            <circle cx="5" cy="5" r="3" />
        </marker>
        <marker id="dot-redundant-true" viewBox="0 0 10 10" refX="5" refY="5"
            markerWidth="4" markerHeight="4" filter="none">
            <circle cx="5" cy="5" r="3" />
        </marker>
        <filter id="erode">
            <feMorphology operator="erode" radius="8"/>
        </filter>
    </defs>
{{range .Stations}}
    <text x="{{$.X .Coord}}" y="{{$.Y .Coord}}" class="station-label">
        {{.Station.Name}}
        <title>{{.Station.EvaNumber}}</title>
    </text>
{{end}}
{{range .SortedEdges}}
    <path id="{{.ID}}" d="M {{$.X .From}},{{$.Y .From}} L{{$.X .To}},{{$.Y .To}}"
        data-pd="{{.PreviousDeparture}}" data-nd="{{.NextDeparture}}" data-pa="{{.PreviousArrival}}" data-na="{{.NextArrival}}"
        class="edge type-{{.Type}} redundant-{{.Redundant}} {{ range .ShortestPathFor }} sp-{{.ID}}{{ end }} {{if eq .ProviderShortestPath true}}provider-shortest-path{{end}}"
        />
    <path id="{{.ID}}-toucharea" d="M {{$.X .From}},{{$.Y .From}} L{{$.X .To}},{{$.Y .To}}"
        class="edge-toucharea"
        />
{{end}}
{{range .SortedEdges}}
    <text>
        <textPath href="#{{.ID}}" id="{{.ID}}-label" startOffset="50%" text-anchor="middle"
            class="label type-{{.Type}} label-{{.ID}}">
            {{.Label}}
        </textPath>
    </text>
    <text x="{{$.X .To}}" y="{{$.Y .To}}" id="{{.ID}}-arrival" text-anchor="end"
        class="arrival type-{{.Type}} label-{{.ID}}">
        {{.Arrival}}
    </text>
    <text x="{{$.X .From}}" y="{{$.Y .From}}" id="{{.ID}}-departure" text-anchor="start" 
        class="departure type-{{.Type}} label-{{.ID}}">
        {{.Departure}}
    </text>
{{end}}
    <script xlink:href="res/client.js" />
</svg>